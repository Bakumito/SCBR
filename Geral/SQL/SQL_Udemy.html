<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      type="text/css"
      href="sql_stylesheet.css"
      media="screen"
    />
    <title>Fundamentos SQL</title>
  </head>
  <body>
    <h1>Fundamentos SQL</h1>
    <div>
      <h2>As 5 linguagens SQL</h2>
      <p>
        A linguagem SQL se subdivide em 5 grupos de comandos. Alguns autores
        apenas consideram 3 ou 4. Cada grupo tem seus comandos específicos,
        tendo cada um uma finalidade específica.
        <br />
        São elas:
      </p>
      <ul>
        <li>
          DDL
          <ul>
            <li>USE</li>
            <li>CREATE</li>
            <li>ALTER</li>
            <li>DROP</li>
            <li>TRUNCATE</li>
          </ul>
        </li>
        <li>
          DML
          <ul>
            <li>INSERT</li>
            <li>UPDATE</li>
            <li>DELETE</li>
            <li>MERGE</li>
          </ul>
        </li>
        <li>
          DCL
          <ul>
            <li>GRANT</li>
            <li>REVOKE</li>
            <li>DENY</li>
          </ul>
        </li>
        <li>
          DTL
          <ul>
            <li>BEGIN</li>
            <li>TRANSACTION</li>
            <li>COMMIT</li>
            <li>ROLLBACK</li>
          </ul>
        </li>
        <li>
          DQL
          <ul>
            <li>SELECT</li>
          </ul>
        </li>
      </ul>
      <p>
        Obs: SELECT está categorizado como DQL, mas aparece como DML nas provas
        oficiais.
      </p>
    </div>
    <div>
      <h3>DDL - Data Definition Language</h3>
      <p>
        O DDL é usado para criar, alterar e deletar objetos do banco de dados.
        Podendo ser banco de dados, tabelas, views, procedures, functions,
        indexes e etc.
        <br />
        Seus principais comandos são:
      </p>
      <ul>
        <li>USE - Muda o context da janela de consulta</li>
        <li>CREATE - Cria objetos no banco de dados</li>
        <li>ALTER - Altera objetos no banco</li>
        <li>DROP - Apaga objetos do banco</li>
        <li>
          TRUNCATE - Apaga todos os registros de uma tabela, reiniciando o
          índice das colunas auto incrementais
        </li>
      </ul>
      <p>Obs: Truncate algumas vezes pode ser considerado DML</p>
      <ul>
        <li>
          Truncar redefine os valores de identidade enquanto a exclusão não.
        </li>
        <li>Truncar remove todos os registros e não aciona gatilhos</li>
        <li>
          Truncar é mais rápido comparado a excluir, pois faz menos uso do log
          de transações.
        </li>
        <li>
          Truncar não é possível quando uma tabela é referenciada por uma chave
          estrangeira ou quando tabelas são usadas na replicação ou com
          visualizações indexadas.
        </li>
      </ul>
    </div>
    <div>
      <h3>DML - Data Manipulation Language</h3>
      <p>
        O DML é usado para a manipulação de registros no banco de dados.
        <br />
        Seus comandos são:
      </p>
      <ul>
        <li>INSERT - Insere registros no banco</li>
        <li>UPDATE - Atualiza registros no banco</li>
        <li>DELETE - Deleta / Apaga registros no banco</li>
        <li>
          Merge - Executa operações de inserção, atualização ou exclusão em uma
          tabela de destino com base nos resultados de uma junção com uma tabela
          de origem
        </li>
      </ul>
      <p>
        Obs: Para a certificação MTA Database Fundamentals, o comando SELECT é
        categorizado como um comando DML.
      </p>
    </div>
    <div>
      <h3>DCL - Data Control Language</h3>
      <p>
        O DCL controla a segurança dos dados, definindo quem tem acesso a
        determinado tipo de operação.
        <br />
        Seus comandos são:
      </p>
      <ul>
        <li>
          GRANT - Usado para dar permissão a um determinado usuário para
          executar um procedimento
        </li>
        <li>DENY - Negar permissões de acesso a dados</li>
        <li>REVOKE - Desfaz uma permissão, seja uma GRANT ou DENY</li>
      </ul>
    </div>
    <div>
      <h3>DTL - Data Transaction Language</h3>
      <p>
        O DTL é usado para a manipulação de transações (inserção, alteração,
        remoção e consulta) no banco de dados.
        <br />
        Seus comandos são:
      </p>
      <ul>
        <li>
          BEGIN TRAN ou (BEGIN TRANSACTION) - Utilizado para iniciar uma
          transação
        </li>
        <li>COMMIT - Utilizado para gravar as transações no banco</li>
        <li>
          ROLLBACK - Utilizado para desfazer as alterações de uma transação no
          banco
        </li>
      </ul>
      <p>
        Obs1: Alguns SGBDs são auto-commit, ou seja, uma vez executado comandos
        do tipo DML os dados são gravados automaticamente no banco de dados.
        <br />
        Obs2: Ao realizar a abertura de uma transação com o BEGIN TRAN, a
        transação deve ser finalizada com os comandos COMMIT ou ROLLBACK.
        <br />
        Alguns sistemas travam quando uma transação é aberta e não é finalizada.
      </p>
    </div>
    <div>
      <h3>DQL - Data Query Language</h3>
      <p>
        O DQL é usado para consultar dados no banco.
        <br />
        Seu comandos é:
      </p>
      <ul>
        <li>
          SELECT - Usado para consultar informação aos registros das tabelas do
          banco de dados.
        </li>
      </ul>
    </div>
    <div>
      <h3>Dicas sobre os comandos SQL</h3>
      <p>
        É importante criar um padrão de codificação e nomenclatura dos objetos
        do banco de dados. Esse processo facilita a leitura do código e futuras
        manutenções.
        <br />
        Dicas:
      </p>
      <ul>
        <li>
          Os tipos de dados string (texto) e data são delimitados por aspas
          simples.
          <ul>
            <li>Ex: 'João'</li>
            <li>Ex: '2019-01-01'</li>
          </ul>
        </li>
        <li>
          Comentários no SQL Server
          <ul>
            <li>Linha: --</li>
            <li>Bloco: /* */</li>
          </ul>
        </li>
        <li>
          Dependendo do idioma que o SQL Server foi configurado, a data pode vir
          no formato ANO-MÊS-DIA ou DIA-MÊS-ANO.
        </li>
        <li>
          Vírgula na linguagem SQL é separador de campos.
          <ul>
            <li>Ex: Campo1, campo2, campo3, ...</li>
          </ul>
        </li>
        <li>
          Para dados do tipo números, utilizar o ponto para separar valores
        </li>
        <li>
          No comando SELECT o asterisco (*) significa que todos os campos da
          tabela serão exibidos.
        </li>
      </ul>
    </div>
    <div>
      <h2>Comandos DDL</h2>
      <h3>CREATE</h3>
      <p>
        Sintaxe:
        <pre>
          <code>
            create obeto* NOME_OBJETO;
          </code>
        </pre>
        Ex Criar banco de dados:
        <pre>
          <code>
            create database db_ddl;
          </code>
        </pre>
        Ex criar tabela:
        <pre>
          <code>
            create table nome_tabela(
              nome_coluna1 int primary key,
              nome_coluna2 varchar(100),
              nome_coluna3 char(1)
            );
          </code>
        </pre>
      </p>
      <h3>USE</h3>
      <p>
        Para carregar o banco de dados no contexto da janela de consulta do SQL Server:
        <pre>
          <code>
            use nome_banco;
          </code>
        </pre>
      </p>      
      <h3>ALTER</h3>
      <p>
        Sintaxe:
        <pre>
          <code>
            alter objeto nome_objeto;
          </code>
        </pre>
        Para alterar a tabela, adicionando um novo campo:
        <pre>
          <code>
            alter table nome_tabela
            add nome_coluna tipo_dado, nome_coluna2 tipo_dado;
          </code>
        </pre>
        Para alterar a tabela, mudando o tipo de dado:
        <pre>
          <code>
            alter table nome_tabela
            alter column nome_coluna novo_tipo_dado;
          </code>
        </pre>
        Para alterar a tabela, excluindo uma coluna:
        <pre>
          <code>
            alter table nome_tabela
            drop column nome_coluna;
          </code>
        </pre>
      </p>
      <h3>DROP</h3>
      <p>
        Sintaxe:
        <pre>
          <code>
            drop objeto nome_objeto;
          </code>
        </pre>
        Para apagar a tabela do banco de dados:
        <pre>
          <code>
            drop table nome_tabela;
          </code>
        </pre>
        obs: Se existir ligação de chave estrangeira não será possível deletar a tabela.
        <br>
        Para apagar objetos do banco de dados:
        <pre>
          <code>
                drop view nome_view

                drop function nome_function

                drop procedure nome_procedure

                drop trigger nome_trigger

                Estes objetos também são os mesmos para alter.
          </code>
        </pre>
      </p>
      <h3>TRUNCATE</h3>
      <p>
        Sintaxe:
        <pre>
          <code>
            truncate table nome_tabela;
          </code>
        </pre>
      </p>
    </div>
  </body>
</html>
